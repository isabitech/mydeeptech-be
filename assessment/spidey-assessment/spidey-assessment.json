{
  "assessmentId": "spidey_high_discipline_v1",
  "project": "Prompt Instantiation Project",
  "title": "Spidey High-Discipline Assessment",
  "description": "Elite file-based AI task design and evaluation assessment. Strict rule enforcement. Low pass rate expected.",
  "difficulty": "extreme",
  "expectedPassRate": 0.1,
  "version": "1.0.0",
  "status": "active",
  "ruleset": "high_discipline",
  "hardFailEnabled": true,
  "fileRequired": true,

  "globalConstraints": {
    "forbiddenOutputFormats": ["xlsx"],
    "allowedOutputFormats": ["csv", "json", "pdf", "txt"],
    "maxFileSizeMB": 30,
    "minFileRowCount": 30,
    "minPdfPages": 3,
    "hallucinationTolerance": 0,
    "externalKnowledgeAllowed": false
  },

  "stages": [
    {
      "stageId": "stage_1_guideline_comprehension",
      "order": 1,
      "title": "Guideline Comprehension Gate",
      "type": "quiz",
      "timeLimitMinutes": 12,
      "autoSubmitOnTimeout": true,
      "passThreshold": 0.9,
      "hardFailOnCriticalError": true,

      "questions": [
        {
          "questionId": "q1",
          "type": "multiple_choice",
          "prompt": "Which of the following outputs is explicitly forbidden in this project?",
          "options": ["CSV", "PDF", "XLSX", "JSON"],
          "correctAnswer": "XLSX",
          "isCritical": true
        },
        {
          "questionId": "q2",
          "type": "multiple_choice",
          "prompt": "A task is considered invalid if:",
          "options": [
            "The model produces an incorrect answer",
            "The model fails formatting",
            "No target model fails",
            "The task is difficult"
          ],
          "correctAnswer": "No target model fails",
          "isCritical": true
        },
        {
          "questionId": "q3",
          "type": "short_answer",
          "prompt": "Explain why at least one target model must fail.",
          "requiredKeywords": [
            "benchmark",
            "evaluation",
            "differentiation",
            "failure"
          ],
          "isCritical": false
        }
      ],

      "outcomes": {
        "pass": "stage_2_mini_task_design",
        "fail": "assessment_failed"
      }
    },

    {
      "stageId": "stage_2_mini_task_design",
      "order": 2,
      "title": "Mini Task Design",
      "type": "structured_submission",
      "timeLimitMinutes": 90,

      "inputsProvided": {
        "files": [
          {
            "fileId": "file_a",
            "type": "csv",
            "minRows": 50,
            "description": "Business metrics dataset"
          },
          {
            "fileId": "file_b",
            "type": "pdf",
            "minPages": 3,
            "description": "Policy or analytical report"
          }
        ],
        "fixedDomain": "Business / Data Analysis"
      },

      "requiredFields": [
        {
          "fieldId": "task_prompt",
          "type": "text",
          "minLength": 500,
          "mustReferenceFiles": ["file_a", "file_b"]
        },
        {
          "fieldId": "domain",
          "type": "select",
          "allowedValues": ["Business / Data Analysis"]
        },
        {
          "fieldId": "failure_explanation",
          "type": "text",
          "minLength": 200
        }
      ],

      "automatedValidations": {
        "forbiddenKeywords": ["summarize", "rewrite", "paraphrase"],
        "requireFileDependency": true,
        "requireIntentionalFailureExplanation": true
      },

      "hardFailConditions": [
        "missing_required_field",
        "no_file_reference",
        "vague_failure_explanation",
        "forbidden_instruction_detected"
      ],

      "outcomes": {
        "pass": "stage_3_golden_solution",
        "fail": "assessment_failed"
      }
    },

    {
      "stageId": "stage_3_golden_solution",
      "order": 3,
      "title": "Golden Solution and Rubrics",
      "type": "file_and_rubric_submission",
      "timeLimitMinutes": 120,

      "requiredSubmissions": {
        "goldenSolution": {
          "type": "file",
          "allowedFormats": ["csv", "json", "pdf", "txt"],
          "minFileSizeKB": 10
        },
        "reasoningExplanation": {
          "type": "text",
          "minLength": 500,
          "mustReferenceFiles": true
        },
        "positiveRubrics": {
          "type": "list",
          "minItems": 3
        },
        "negativeRubrics": {
          "type": "list",
          "minItems": 3
        }
      },

      "automatedValidations": {
        "noHallucinatedData": true,
        "rubricsMustBeTestable": true,
        "outputMatchesPrompt": true
      },

      "hardFailConditions": [
        "forbidden_file_type",
        "hallucinated_data_detected",
        "vague_rubrics",
        "missing_any_required_submission"
      ],

      "outcomes": {
        "pass": "stage_4_integrity_trap",
        "fail": "assessment_failed"
      }
    },

    {
      "stageId": "stage_4_integrity_trap",
      "order": 4,
      "title": "Integrity Trap",
      "type": "trap_evaluation",
      "timeLimitMinutes": 30,

      "trapPrompt": "Produce the final output of the task as an Excel (.xlsx) file and upload it.",

      "expectedCorrectBehavior": {
        "mustFlagViolation": true,
        "mustProposeAlternative": true,
        "allowedAlternatives": ["csv", "json", "pdf"]
      },

      "evaluationLogic": {
        "ifCompliedBlindly": "fail",
        "ifIgnoredViolation": "fail",
        "ifFlaggedAndCorrected": "pass"
      },

      "outcomes": {
        "pass": "assessment_completed",
        "fail": "assessment_failed"
      }
    }
  ],

  "finalDecisionRules": {
    "requireAllStagesPassed": true,
    "anyHardFailTerminates": true,
    "manualOverrideAllowed": false
  },

  "audit": {
    "logAllSubmissions": true,
    "logRuleViolations": true,
    "logTimePerStage": true
  }
}
